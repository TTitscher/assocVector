################################################################################
# AssocVector...
################################################################################

The AssocVector is a container similar to Loki::AssocVector created by Andrei Alexandrescu. However 'insert' operation in significantly optimised. All the others operations should not be slower.



################################################################################
# Project Homepage...
################################################################################

http://lukaszczerwinski.pl/assoc_vector.en.html



################################################################################
# License...
################################################################################

AssocVector is developed under the BSD license. It is allowed to distribute source, use it and modify without any limitations either for personal or commercial goal. Whilst distributing source code using AssocVector it is obligate to mark the author

There is absolutely no guarantee that AssocVector will work without any errors and that is free of any bugs. AssocVector author is not responsible for any damages, mind and financial loses related with AssocVector using.



################################################################################
# How to use it...
################################################################################
1) Interface of AssocVector is almost the same like std::map

    AssocVector< std::string, int > av;

    av[ "c++" ] = 1983;
    av[ "java" ] = 1995;
    av[ "scala" ] = 2001;

    assert( av[ "c++" ] == 1983 );
    assert( av.count( "java" ) == 1 );
    assert( av.find( "scala" ) != av.end() );

2) Insert operation is buffered that's why may be much faster

    AssocVector< std::string, int > av;

    for( ... ){
        av.insert( AssocVector::value_type( key, value ) );
    }

3) merge operation enforce merging buffer with main storage, after it AssocVector is like an array

    AssocVector< std::string, int > av;

    for( ... ){
        av.insert( AssocVector::value_type( key, value ) );
    }

    av.merge();

4) Of course AssocVector works fine even if merge operation is never called.



################################################################################
# How it works...
################################################################################

AssocVector is composed of two arrays, first called storage, second called buffer. Both arrays are keep sorted all the time. Insert operation puts new items into buffer. Since buffer is much shorter than storage it is quite effective. When buffer is completely full it is merged into storage. This operation may be longer however it is performed only sometimes.

+---+---+---+---+---+---+---+---+---+---+---+---+---+
| 0 | 1 | 4 | 6 | 8 | 9 | 11| 13| 32| 35| 47| 48| 50|
+---+---+---+---+---+---+---+---+---+---+---+---+---+
|   |   |   |
+---+---+---+

After insert 2

+---+---+---+---+---+---+---+---+---+---+---+---+---+
| 0 | 1 | 4 | 6 | 8 | 9 | 11| 13| 32| 35| 47| 48| 50|
+---+---+---+---+---+---+---+---+---+---+---+---+---+
| 2 |   |   |
+---+---+---+

After insert 3

+---+---+---+---+---+---+---+---+---+---+---+---+---+
| 0 | 1 | 4 | 6 | 8 | 9 | 11| 13| 32| 35| 47| 48| 50|
+---+---+---+---+---+---+---+---+---+---+---+---+---+
| 2 | 3 |   |
+---+---+---+

After insert 49

+---+---+---+---+---+---+---+---+---+---+---+---+---+
| 0 | 1 | 4 | 6 | 8 | 9 | 11| 13| 32| 35| 47| 48| 50|
+---+---+---+---+---+---+---+---+---+---+---+---+---+
| 2 | 3 | 49|
+---+---+---+

After insert 5

+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+
| 0 | 1 | 2 | 3 | 4 | 6 | 8 | 9 | 11| 13| 32| 35| 47| 48| 49| 50|
+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+
| 5 |   |   |
+---+---+---+

After AssocVector::merge called

+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+
| 0 | 1 | 2 | 3 | 4 | 5 | 6 | 8 | 9 | 11| 13| 32| 35| 47| 48| 49| 50|
+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+
|   |   |   |
+---+---+---+

All the time size of buffer is kept as sqrt(storage.size()) which is an optimal coefficient for it.



################################################################################
# Requirements...
################################################################################

AssocVector depends on following externals:
• C++/STL



################################################################################
# Bugs...
################################################################################
There are no bugs. There are "features".



################################################################################
# Support and further development...
################################################################################

Fixing all potential bugs
Support for move semantic (and other C++11 features)



################################################################################
# GitHub...
################################################################################
https://github.com/wo3kie/AssocVector
